window.Litmus=window.Litmus||{},Litmus.SegmentioLoaderInstance=function(){this.hasRun=!1,this.hasLoaded=!1,this.activeIntegrations=[],this.activeCookieGroups=[],this.onAuthCallbacks=[],this.onReadyCallbacks=[],this.config={}},Litmus.SegmentioLoaderInstance.prototype.configure=function(t){for(var n in t)t.hasOwnProperty(n)&&(this.config[n]=t[n])},Litmus.SegmentioLoaderInstance.prototype.onAuth=function(t){this.hasRun?t():this.onAuthCallbacks.push(t)},Litmus.SegmentioLoaderInstance.prototype.onReady=function(t){this.hasLoaded?t():this.onReadyCallbacks.push(t)},Litmus.SegmentioLoaderInstance.prototype.isActive=function(t){return!!this.hasRun&&-1!==this.activeIntegrations.indexOf(t)},Litmus.SegmentioLoaderInstance.prototype.load=function(){if(!window.analytics||!this.config.code||this.hasRun)return!1;this.hasRun=!0,this.onAuthCallbacks.forEach(function(t){t()}),analytics.ready(function(){this.config.debug&&(console.log("segmentLoader.activeCookieGroups",this.activeCookieGroups),console.log("segmentLoader.activeIntegrations",this.activeIntegrations)),this.onReadyCallbacks.forEach(function(t){t()}),this.hasLoaded=!0,this._bootstrapScriptTags()}.bind(this));var t=this._segmentOptions();this.config.debug&&console.log("segment opts",t),analytics.load(this.config.code,t)},Litmus.SegmentioLoaderInstance.prototype.groupAuthHandler=function(t){if(t=t.toString(),this.hasRun||-1!==this.activeCookieGroups.indexOf(t))return!1;this.config.debug&&console.log("groupAuthHandler",t),this.activeCookieGroups.push(t),this.activeIntegrations=this.activeIntegrations.concat(this.config.data.groups[t.toString()].integrations)},Litmus.SegmentioLoaderInstance.prototype._segmentOptions=function(){var t={All:!1};return this.activeIntegrations.forEach(function(n){t[n]=!0}),{integrations:t}},Litmus.SegmentioLoaderInstance.prototype._bootstrapScriptTags=function(){var t,n=function(){window.$&&(this.activeIntegrations.forEach(function(t){$('script[data-segment-integration="'+t+'"]').each(function(t,n){$(n).replaceWith(n.innerText)})}.bind(this)),clearInterval(t))}.bind(this);t=setInterval(n,100)},Litmus.SegmentioLoader=new Litmus.SegmentioLoaderInstance,window.Litmus=window.Litmus||{},Litmus.OneTrustHandler=function(t){this.groupIds=t.groupIds||[],this._intervalId},Litmus.OneTrustHandler.prototype.start=function(){this._intervalId=setInterval(this._dataLayerListener.bind(this),100)},Litmus.OneTrustHandler.prototype.stop=function(){clearInterval(this._intervalId)},Litmus.OneTrustHandler.prototype._dataLayerListener=function(){if(window.dataLayer){for(var t=null,n=0;n<window.dataLayer.length&&!t;n++)window.dataLayer[n].hasOwnProperty("OptanonActiveGroups")&&(t=window.dataLayer[n]);if(t){var i=t.OptanonActiveGroups.split(",");i=i.filter(function(t){return-1!==this.groupIds.indexOf(t)}.bind(this));for(var n=0;n<i.length;n++)Litmus.SegmentioLoader.groupAuthHandler(i[n]);Litmus.SegmentioLoader.load(),this.stop()}}};